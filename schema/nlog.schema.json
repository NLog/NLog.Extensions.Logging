{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "http://example.com/example.json",
  "type": "object",
  "title": "application settings",
  "default": {},
  "required": [
    "NLog"
  ],
  "additionalProperties": true,
  "properties": {
    "NLog": {
      "$id": "#/NLog",
      "type": "object",
      "title": "NLog config",
      "default": {},
      "examples": [
        {
          "NLog": {
            "throwConfigExceptions": true,
            "targets": {
              "logfile": {
                "type": "File",
                "fileName": "c:/temp/nlog-${shortdate}.log"
              },
              "logconsole": {
                "type": "Console"
              }
            },
            "rules": [
              {
                "logger": "*",
                "minLevel": "Info",
                "writeTo": "logconsole"
              },
              {
                "logger": "*",
                "minLevel": "Debug",
                "writeTo": "logfile"
              }
            ]
          }
        }
      ],
      "additionalProperties": true,
      "properties": {
        "autoReload": {
          "$id": "#/NLog/properties/autoReload",
          "type": "boolean",
          "title": "autoReload",
          "description": "Watch for changes and reload automatically when changed.",
          "default": false
        },
        "throwConfigExceptions": {
          "$id": "#/NLog/properties/throwConfigExceptions",
          "type": [
            "boolean",
            "null"
          ],
          "title": "throwConfigExceptions",
          "description": "Throws an exception when there is a config error? If not set, then throwExceptions will be used for this setting.",
          "default": false,
          "examples": [
            true
          ]
        },
        "throwExceptions": {
          "$id": "#/NLog/properties/throwExceptions",
          "type": "boolean",
          "title": "throwExceptions",
          "description": "Throws an exception when there is an error",
          "default": false,
          "examples": [
            true
          ]
        },
        "internalLogLevel": {
          "$id": "#/NLog/properties/internalLogLevel",
          "type": "string",
          "title": "internalLogLevel",
          "description": "The minimal log level for the internal logger.",
          "examples": [
            "info"
          ]
        },
        "internalLogFile": {
          "$id": "#/NLog/properties/internalLogFile",
          "type": "string",
          "title": "internal Log File",
          "description": "Write internal log to a file",
          "examples": [
            "${basedir}/internal-nlog.txt"
          ]
        },
        "internalLogToConsole": {
          "$id": "#/NLog/properties/internalLogToConsole",
          "type": "boolean",
          "title": "internalLogToConsole",
          "description": "Write internal log to a console",
          "default": "false"
        },
        "internalLogToConsoleError": {
          "$id": "#/NLog/properties/internalLogToConsoleError",
          "type": "boolean",
          "title": "internalLogToConsole",
          "description": "Write internal log to a console with error stream",
          "default": "false"
        },
        "globalThreshold": {
          "$id": "#/NLog/properties/globalThreshold",
          "type": "string",
          "title": "global Threshold",
          "description": "Log events below this threshold are not logged.",
          "enum": [
            "Trace",
            "Debug",
            "Info",
            "Warn",
            "Error",
            "Fatal"
          ]
        },
        "autoShutdown": {
          "$id": "#/NLog/properties/autoShutdown",
          "type": "boolean",
          "title": "autoShutdown",
          "description": "Automatically call `LogFactory.Shutdown` on AppDomain.Unload or AppDomain.ProcessExit",
          "default": "true"
        },
        "extensions": {
          "$id": "#/NLog/properties/extensions",
          "type": "array",
          "title": "extensions",
          "description": "",
          "default": [],
          "examples": [
            [
              {
                "assembly": "NLog.Extensions.Logging"
              },
              {
                "assembly": "NLog.Web.AspNetCore"
              }
            ]
          ],
          "additionalItems": false,
          "items": {
            "$id": "#/NLog/properties/extensions/item",
            "type": "object",
            "title": "first anyOf",
            "description": "",
            "default": {},
            "examples": [
              {
                "assembly": "NLog.Extensions.Logging"
              }
            ],
            "additionalProperties": false,
            "properties": {
              "assembly": {
                "$id": "#/NLog/properties/extensions/item/properties/assembly",
                "type": "string",
                "title": "assembly",
                "description": "",
                "examples": [
                  "NLog.Extensions.Logging"
                ]
              },
              "prefix": {
                "$id": "#/NLog/properties/extensions/item/properties/prefix",
                "type": "string",
                "title": "prefix",
                "description": "Item name prefix",
                "default": ""
              },
              "type": {
                "$id": "#/NLog/properties/extensions/item/properties/type",
                "type": "string",
                "title": "type",
                "description": "",
                "default": ""
              },
              "assemblyFile": {
                "$id": "#/NLog/properties/extensions/item/properties/assemblyFile",
                "type": "string",
                "title": "assemblyFile",
                "description": "",
                "default": ""
              }
            }
          }
        },
        "variables": {
          "$id": "#/NLog/properties/variables",
          "type": "object",
          "title": "variables",
          "description": "",
          "default": {},
          "examples": [
            {
              "myLogDir": "c:/temp"
            }
          ],
          "additionalProperties": true,
          "propertyNames": {
            "pattern": "^[A-Za-z0-9_.-]+$"
          },
          "patternProperties": {
            ".*": {
              "type": [
                "number",
                "string",
                "boolean"
              ]
            }
          }
        },
        "default-wrapper": {
          "$id": "#/NLog/properties/default-wrapper",
          "type": "object",
          "title": "default-wrapper",
          "description": "",
          "default": {},
          "examples": [
            {
              "type": "AsyncWrapper",
              "overflowAction": "Block"
            }
          ],
          "additionalProperties": true,
          "required": [
            "type"
          ],
          "properties": {
            "type": {
              "$id": "#/NLog/properties/default-wrapper/properties/type",
              "type": "string",
              "title": "type",
              "description": "",
              "examples": [
                "AsyncWrapper"
              ]
            }
          }
        },
        "targets": {
          "$id": "#/NLog/properties/targets",
          "type": "object",
          "title": "targets",
          "description": "",
          "default": {},
          "examples": [
            {
              "all-file": {
                "type": "File",
                "fileName": "${var_logdir}/nlog-all-${shortdate}.log",
                "layout": {
                  "type": "JsonLayout",
                  "Attributes": [
                    {
                      "name": "timestamp",
                      "layout": "${date:format=o}"
                    },
                    {
                      "name": "level",
                      "layout": "${level}"
                    },
                    {
                      "name": "logger",
                      "layout": "${logger}"
                    },
                    {
                      "name": "message",
                      "layout": "${message:raw=true}"
                    },
                    {
                      "name": "properties",
                      "encode": false,
                      "layout": {
                        "type": "JsonLayout",
                        "includeallproperties": "true"
                      }
                    }
                  ]
                }
              },
              "own-console": {
                "type": "LimitingWrapper",
                "interval": "00:00:01",
                "messageLimit": 100,
                "target": {
                  "type": "ColoredConsole",
                  "layout": "${longdate}|${event-properties:item=EventId_Id:whenEmpty=0}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}|${callsite}",
                  "rowHighlightingRules": [
                    {
                      "condition": "level == LogLevel.Error",
                      "foregroundColor": "Red"
                    },
                    {
                      "condition": "level == LogLevel.Fatal",
                      "foregroundColor": "Red",
                      "backgroundColor": "White"
                    }
                  ]
                }
              },
              "database": {
                "type": "Database",
                "dbProvider": "System.Data.SqlClient",
                "connectionString": "Data Source=database server;Initial Catalog=database;Trusted_Connection=False;User Id=AppUser;Password=AppUserPassword;",
                "keepConnection": "true",
                "commandText": "insert into dbo.log (Guid, MachineName,Timestamp,Level,Message,Logger,Callsite,Exception) values (@Guid, @MachineName, @Timestamp, @Level, @Message, @Logger, @Callsite, @Exception);",
                "parameters": [
                  {
                    "name": "@Guid",
                    "layout": "${guid}"
                  },
                  {
                    "name": "@MachineName",
                    "layout": "${machinename}"
                  },
                  {
                    "name": "@Timestamp",
                    "layout": "${date:format=o}",
                    "dbType": "DbType.DateTime"
                  },
                  {
                    "name": "@Level",
                    "layout": "${level}"
                  },
                  {
                    "name": "@Message",
                    "layout": "${message}"
                  },
                  {
                    "name": "@Logger",
                    "layout": "${logger}"
                  },
                  {
                    "name": "@Callsite",
                    "layout": "${callsite}"
                  },
                  {
                    "name": "@Exception",
                    "layout": "${exception:tostring}"
                  }
                ]
              }
            }
          ],
          "additionalProperties": true
        },
        "rules": {
          "oneOf": [
            {
              "$id": "#/NLog/properties/rules",
              "type": "array",
              "title": "rules",
              "description": "",
              "default": [],
              "examples": [
                [
                  {
                    "logger": "*",
                    "minLevel": "Trace",
                    "writeTo": "all-file, database"
                  },
                  {
                    "logger": "Microsoft.*",
                    "maxLevel": "Info",
                    "final": true
                  }
                ]
              ],
              "additionalItems": true,
              "items": {
                "$id": "#/NLog/properties/rules/item",
                "type": "object",
                "title": "logger rule",
                "description": "Send events to targets",
                "default": {},
                "examples": [
                  {
                    "logger": "*",
                    "minLevel": "Error",
                    "writeTo": "database"
                  },
                  {
                    "logger": "*",
                    "minLevel": "Trace",
                    "writeTo": "all-file, database",
                    "enabled": "false"
                  },
                  {
                    "logger": "MyNamespace.MyClass",
                    "minLevel": "Trace",
                    "writeTo": "MyClass-file"
                  }
                ],
                "required": [
                  "logger"
                ],
                "additionalProperties": true,
                "properties": {
                  "logger": {
                    "$id": "#/NLog/properties/rules/item/properties/logger",
                    "type": "string",
                    "title": "logger",
                    "description": "Filter on the name of the logger. May include wildcard characters ('*' or '?').",
                    "examples": [
                      "*",
                      "Microsoft.*",
                      "*.Something.*"
                    ]
                  },
                  "ruleName": {
                    "$id": "#/NLog/properties/rules/item/properties/rulename",
                    "type": "string",
                    "title": "rulename",
                    "description": "Rule identifier to allow rule lookup with Configuration.FindRuleByName and Configuration.RemoveRuleByName.",
                    "examples": [
                      "*"
                    ]
                  },
                  "level": {
                    "$id": "#/NLog/properties/rules/item/properties/level",
                    "type": "string",
                    "title": "level",
                    "description": "",
                    "enum": [
                      "Trace",
                      "Debug",
                      "Info",
                      "Warn",
                      "Error",
                      "Fatal"
                    ]
                  },
                  "levels": {
                    "$id": "#/NLog/properties/rules/item/properties/levels",
                    "type": "string",
                    "title": "levels",
                    "description": "Comma separated list of levels that this rule matches.",
                    "examples": [
                      "Trace, Debug",
                      "Warn, Error, Fatal",
                      "Debug"
                    ]
                  },
                  "minLevel": {
                    "$id": "#/NLog/properties/rules/item/properties/minLevel",
                    "type": "string",
                    "title": "minLevel",
                    "description": "",
                    "enum": [
                      "Trace",
                      "Debug",
                      "Info",
                      "Warn",
                      "Error",
                      "Fatal"
                    ]
                  },
                  "maxLevel": {
                    "$id": "#/NLog/properties/rules/item/properties/maxLevel",
                    "type": "string",
                    "title": "maxLevel",
                    "description": "",
                    "enum": [
                      "Trace",
                      "Debug",
                      "Info",
                      "Warn",
                      "Error",
                      "Fatal"
                    ]
                  },
                  "writeTo": {
                    "$id": "#/NLog/properties/rules/item/properties/writeTo",
                    "type": "string",
                    "title": "writeTo",
                    "description": "Name or names of a target - separated by comma. Remove this property for sending events to the blackhole.",
                    "examples": [
                      "target1",
                      "target1, target2"
                    ]
                  },
                  "final": {
                    "$id": "#/NLog/properties/rules/item/properties/final",
                    "type": "boolean",
                    "title": "final",
                    "description": "Ignore further rules if this one matches.",
                    "default": false,
                    "examples": [
                      true
                    ]
                  },
                  "enabled": {
                    "$id": "#/NLog/properties/rules/item/properties/final",
                    "type": "boolean",
                    "title": "final",
                    "description": "",
                    "default": false,
                    "examples": [
                      true
                    ]
                  },
                  "filters": {
                    "$id": "#/NLog/properties/rules/item/properties/filters",
                    "type": "object",
                    "title": "filters",
                    "description": "",
                    "default": {},
                    "examples": [
                      {
                        "whenRepeated": {
                          "layout": "${message}",
                          "action": "Ignore"
                        }
                      }
                    ],
                    "additionalProperties": true
                  }
                }
              }
            },
            {
              "type": "object",
              "propertyNames": {
                "pattern": "^[0-9]+$"
              },
              "patternProperties": {
                ".*": {
                  "schema": "#/NLog/properties/rules/item"
                }
              },
              "examples": [
                [
                  {
                    "0": {
                      "logger": "*",
                      "minLevel": "Error",
                      "writeTo": "errorFile,errorEmail"
                    },
                    "1": {
                      "logger": "*",
                      "minLevel": "Debug",
                      "writeTo": "debugFile"
                    }
                  }
                ]
              ]
            }
          ]
        }
      }
    }
  }
}